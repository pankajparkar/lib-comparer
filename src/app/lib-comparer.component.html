<div class="lib-comparer-container">
  <h2>Library/Framework Recommendation</h2>
  <form (ngSubmit)="searchLibraries()" class="lib-comparer-form">
    <label for="framework">Library/Framework:</label>
    <select id="framework" [(ngModel)]="selectedFramework" name="framework" required>
      <option value="" disabled selected>Select a framework</option>
      @for(fw of frameworks; track fw) {
        <option [value]="fw">{{ fw }}</option>
      }
    </select>
    <label for="functionality">Functionality:</label>
    <input id="functionality" type="text" [(ngModel)]="functionality" name="functionality" placeholder="e.g. datepicker, select" required />
    <button type="submit" [disabled]="loading">Recommend</button>
  </form>

  @let recommendations = this.recommendations();

  @if(loading) {
    <div class="loading">Loading recommendations...</div>
  }

  @if(!loading && recommendations.length === 0) {
    <div class="no-results">No recommendations found.</div>
  }

  @if(recommendations.length > 0) {
    <div class="recommendations">
      <h3>Recommended Libraries</h3>
      <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>GitHub Stars</th>
          <th>Forks</th>
          <th>Open Issues</th>
          <th>Last Activity</th>
          <th>Users on GitHub</th>
          <th>Package Size</th>
          <th>NPM Downloads</th>
        </tr>
      </thead>
      <tbody>
        @for(lib of recommendations; track lib.id) {
          <tr>
            <td>{{ lib.name }}</td>
            <td>{{ lib.stars }}</td>
            <td>{{ lib.forks }}</td>
            <td>{{ lib.issues }}</td>
            <td>{{ lib.lastActivity }}</td>
            <td>{{ lib.users }}</td>
            <td>{{ lib.size }}</td>
            <td>{{ lib.downloads }}</td>
          </tr>
        }
      </tbody>
      </table>
    </div>
    }
</div>
